---
import Icon from './Icon.astro';

type AlertType = 'success' | 'error' | 'info' | 'warning';

interface Props {
  type?: AlertType;
  title: string;
  message?: string;
  class?: string;
}

const { type = 'info', title, message, class: className = '' } = Astro.props;

const config: Record<AlertType, { icon: string; bg: string; border: string; text: string; iconColor: string }> = {
  success: {
    icon: 'check_circle',
    bg: 'bg-emerald-50',
    border: 'border-success/20',
    text: 'text-success',
    iconColor: 'text-success',
  },
  error: {
    icon: 'error',
    bg: 'bg-red-50',
    border: 'border-error/20',
    text: 'text-error',
    iconColor: 'text-error',
  },
  info: {
    icon: 'info',
    bg: 'bg-blue-50',
    border: 'border-info/20',
    text: 'text-info',
    iconColor: 'text-info',
  },
  warning: {
    icon: 'warning',
    bg: 'bg-amber-50',
    border: 'border-warning/20',
    text: 'text-warning',
    iconColor: 'text-warning',
  },
};

const c = config[type];
---

<div
  class:list={[
    'flex gap-3 p-4 rounded-DEFAULT border',
    c.bg,
    c.border,
    className,
  ]}
  role="alert"
>
  <Icon name={c.icon} size={24} class={c.iconColor} />
  <div class="flex flex-col gap-1">
    <p class:list={['font-semibold text-base', c.text]}>{title}</p>
    {message && <p class="text-body-sm text-gray-600">{message}</p>}
    <slot />
  </div>
</div>
